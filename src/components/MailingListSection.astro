---
interface Props {
    mailinglists: Readonly<
        {
            id: string;
            data: {
                title: string;
                date: string | Date;
                description?: string;
            };
        }[]
    >;
}

const { mailinglists } = Astro.props;
---

<section
    class="bg-white rounded-2xl shadow-xl p-6 mt-6"
    aria-labelledby="mailinglist-heading"
>
    <h2
        id="mailinglist-heading"
        class="text-xl font-bold text-gray-800 mb-4 text-center"
    >
        Newsletters
    </h2>
    {
        mailinglists.length > 0 ? (
            <ul
                class="space-y-3 text-left"
                role="list"
                aria-label="DerniÃ¨res newsletters"
            >
                {mailinglists.map((mail) => (
                    <li>
                        <a
                            href={`/mailinglists/${mail.id}`}
                            class="block p-3 rounded-lg bg-gray-50 hover:bg-gray-100 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
                            aria-label={`Lire la mailing list : ${mail.data.title}`}
                        >
                            <time
                                class="text-sm text-gray-500"
                                datetime={new Date(
                                    mail.data.date,
                                ).toISOString()}
                            >
                                {new Date(mail.data.date).toLocaleDateString(
                                    "fr-FR",
                                    {
                                        day: "numeric",
                                        month: "long",
                                        year: "numeric",
                                    },
                                )}
                            </time>
                            <div class="font-medium text-gray-800">
                                {mail.data.title}
                            </div>
                            {mail.data.description && (
                                <p class="text-sm text-gray-600 mt-1">
                                    {mail.data.description}
                                </p>
                            )}
                        </a>
                    </li>
                ))}
            </ul>
        ) : (
            <p class="text-gray-500 text-center">
                Aucune newsletter pour le moment
            </p>
        )
    }
    <a
        href="/mailinglists"
        class="inline-block mt-4 text-gray-600 hover:text-gray-800 font-medium transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"
        aria-label="Voir toutes les newsletters"
    >
        Voir toutes les newsletters{" "}
        <span aria-hidden="true">&rarr;</span>
    </a>
</section>
