---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

const blogs = await getCollection("blogs");
const sortedBlogs = blogs.sort((a, b) =>
    a.data.name.localeCompare(b.data.name, "fr"),
);
---

<Layout>
    <div class="min-h-screen bg-gray-50 p-4">
        <div class="max-w-2xl mx-auto">
            <nav aria-label="Fil d'Ariane" class="mb-6">
                <a
                    href="/"
                    class="inline-block text-gray-600 hover:text-gray-800 transition focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 rounded"
                    aria-label="Retour Ã  la page d'accueil"
                >
                    <span aria-hidden="true">&larr;</span> Retour
                </a>
            </nav>

            <h1 class="text-3xl font-bold text-gray-800 mb-6">
                Blogs de la communaute
            </h1>

            <ul
                class="space-y-4"
                role="list"
                aria-label="Liste des blogs"
            >
                {
                    sortedBlogs.map((blog) => (
                        <li>
                            <div class="flex items-center justify-between p-4 bg-white rounded-lg shadow hover:shadow-md transition">
                                <a
                                    href={blog.data.url}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="text-lg font-medium text-gray-800 hover:text-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 rounded"
                                    aria-label={`Visiter le blog de ${blog.data.name} (nouvelle fenetre)`}
                                >
                                    {blog.data.name}
                                </a>
                                <a
                                    href={blog.data.rss}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    class="flex items-center gap-1 text-sm text-gray-500 hover:text-orange-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 rounded"
                                    title={`Flux RSS de ${blog.data.name}`}
                                    aria-label={`Flux RSS de ${blog.data.name} (nouvelle fenetre)`}
                                >
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        width="16"
                                        height="16"
                                        viewBox="0 0 24 24"
                                        fill="currentColor"
                                    >
                                        <path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20C5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1Z" />
                                    </svg>
                                    RSS
                                </a>
                            </div>
                        </li>
                    ))
                }
            </ul>
        </div>
    </div>
</Layout>
